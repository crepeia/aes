<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:w="http://xmlns.jcp.org/jsf/composite/ezcomp">
    <f:view locale="#{languageController.locale}">
        <h:head>
            <title>#{messages['contato.title']}</title>
            <script src="https://www.google.com/recaptcha/api.js" async = "defer"></script>
            
            <script>
                var has_completed_recaptcha = false;
                
                function validateRecaptcha() {
                    if (!has_completed_recaptcha) {
                        // ReCAPTCHA não preenchido.
                        document.getElementById('recaptchaError').innerText = 'Por favor, clique em "Não sou um robô" para completar o reCAPTCHA.';
                        return false; // Impede o envio do formulário.
                    } else {
                        // ReCAPTCHA preenchido.
                        document.getElementById('recaptchaError').innerText = ''; // Limpa a mensagem de erro.
                        return true; // Permite o envio do formulário.
                    }
                }
                
                function onRecaptchaSuccess(token) {
                    // console.log("reCAPTCHA completado com sucesso!");
                    has_completed_recaptcha = true;
                }
            </script>

            <w:head_comum />
            <!-- header -->    
            <w:header />
            <w:topmenu />
        </h:head>
        <h:body>
            <div id="corpo">
                <!--mainmenu-->         	
                <div class="main">
                    <div class="pagecontent">                   
                        <h1>#{messages['contact']}</h1>
                        <div id="contato">
                            <h5>#{messages['contato.h4.1']}</h5>
                            <h5>#{messages['contato.h4.2']} <h:outputLink value="https://twitter.com/alcoolesaude" target="_blank">#{messages['contato.h4.2.1']}</h:outputLink></h5>
                            <h5>#{messages['contato.h4.3']} <h:outputLink value="https://www.facebook.com/alcoolesaude/" target="_blank">#{messages['contato.h4.3.1']}</h:outputLink></h5>


                            <h:form id="form" class="form-signup">
                                <p:growl id="errorGrowl" for="info" sticky="true" redisplay="true" globalOnly="true"/>

                                <p:panelGrid columns="1">
                                    <p:panel>
                                        <h4>#{messages['contato.h4.4']}</h4>
                                        <p:inputText styleClass="form-control" id="email" required="true" value="#{userController.user.email}"  size="30" label="#{messages['email']}" validatorMessage="#{messages['email.wrong.format']}" disabled="#{userController.loggedIn}" >
                                            <f:validateLength maximum="50" />
                                            <f:validateRegex pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$" />
                                        </p:inputText>
                                        <p:watermark for="email" value="E-mail" />
                                        <p:message for="email"/>
                                        <h4>#{messages['h4.message']}</h4>
                                        <p:inputTextarea styleClass="form-control" id="message" binding="#{message}" rows="4" cols="60" autoResize="false" required="true" label="#{messages['h4.message']}" />
                                        <p:message for="message"/>
                                        <h:inputHidden id="user" binding="#{user}" value="#{userController.user}"  rendered="false"/>
                                        <h:inputHidden id="language" binding="#{language}" value="#{localeController.language}"  rendered="false"/>
                                        <div class="g-recaptcha" data-sitekey="#{contactController.getRecaptchaKey()}" data-callback="onRecaptchaSuccess"></div>
                                        <span class="error-message" id="recaptchaError"></span>

                                        <div id="signinbtn">
                                            <p:commandButton styleClass="btngen btn btn-primary" value ="#{messages['send']}" update="@form" actionListener="#{contactController.sendContactFormEmail}" onclick="return validateRecaptcha();" >
                                                <f:attribute name="message" value="#{message.value}" />
                                                <f:attribute name="user" value="#{user.value}" />
                                            </p:commandButton>
                                        </div>
                                    </p:panel>
                                    <p:panel>

                                    </p:panel>
                                </p:panelGrid>
                            </h:form>
                        <h6>#{messages['contact.address']}</h6>
                        <h6>#{messages['contact.address1']}</h6>
                        <h6>#{messages['contact.address2']}</h6>
                        <h6>#{messages['contact.address3']}</h6>
                        <h6>#{messages['contact.address4']}</h6>
                        </div>	
                    </div>
                </div>

            </div><!-- end.corpo --> 

            <!--Footer -->
            <w:footer />
        </h:body>
    </f:view>
</html>

